<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <title>{{ movie.title }}</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/css/bootstrap.min.css"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="{{ url_for('static', filename='favicon/apple-touch-icon.png') }}"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="{{ url_for('static', filename='favicon/favicon-32x32.png') }}"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="{{ url_for('static', filename='favicon/favicon-16x16.png') }}"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="192x192"
      href="{{ url_for('static', filename='favicon/android-chrome-192x192.png') }}"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="512x512"
      href="{{ url_for('static', filename='favicon/android-chrome-512x512.png') }}"
    />
    <link
      rel="shortcut icon"
      href="{{ url_for('static', filename='favicon/favicon.ico') }}"
    />
    <link
      rel="manifest"
      href="{{ url_for('static', filename='favicon/site.webmanifest') }}"
    />

    <style>
      body {
        background-color: #f8f9fa;
      }
      .navbar,
      .footer {
        background-color: #ffffff;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      .img-fluid {
        max-height: 450px;
        object-fit: cover;
      }
      .rounded-circle {
        height: 100px;
        width: 100px;
        object-fit: cover;
      }
      .embed-responsive-item {
        height: 315px;
      }
      .footer {
        padding: 20px 0;
        text-align: center;
        background: #ffffff;
        margin-top: 40px;
        box-shadow: 0 -2px 4px rgba(0, 0, 0, 0.1);
      }
      .container-fluid {
        padding: 15px;
      }
      .external-links {
        display: flex;
        flex-wrap: wrap;
        justify-content: center; /* Align links in the center */
        padding: 20px 0;
        gap: 15px; /* Space between each link */
        font-size: 24px;
      }

      .link {
        padding: 10px 20px;
        border-radius: 5px;
        color: #fff; /* White text color */
        background-color: #555; /* Default background color */
        text-decoration: none; /* No underline */
        transition: background-color 0.3s ease; /* Smooth transition for hover effects */
      }

      .link:hover {
        background-color: #333; /* Darken background on hover */
        color: #fff;
      }

      .imdb {
        background-color: #f5c518;
        color: #333;
      }
      .facebook {
        background-color: #3b5998;
      }
      .instagram {
        background-color: #e1306c;
        color: #333;
      }
      .twitter {
        background-color: #1da1f2;
        color: #333;
      }

      .crew-member-info {
        display: flex;
        align-items: center;
        gap: 15px;
      }
      .crew-details {
        flex-grow: 1;
      }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <div class="container-fluid">
        <a href="{{ url_for('home') }}" class="navbar-brand mb-0 h1"
          >{{ movie.title }}</a
        >
      </div>
    </nav>

    <div class="container-fluid mt-4">
      <div class="row">
        <div class="col-lg-4">
          {% if movie.poster_path %}
          <img
            src="https://image.tmdb.org/t/p/w500{{ movie.poster_path }}"
            class="img-fluid"
            alt="{{ movie.title }}"
          />
          {% endif %}
        </div>
        <div class="col-lg-8">
          <h2>{{ movie.title }}</h2>
          <p>
            <strong>Release Date:</strong> {{ movie.release_date or
            'N/A' }}
          </p>
          <p><strong>Runtime:</strong> {{ movie.runtime }} minutes</p>
          <p>
            <strong>Rating:</strong> {{ movie.vote_average }}/10 from
            {{ movie.vote_count }} votes
          </p>
          <p>
            <strong>Genres:</strong>
            {% for genre in movie.genres %} {{ genre.name }}{% if not
            loop.last %}, {% endif %} {% endfor %}
          </p>
          <h3>Overview</h3>
          <p>{{ movie.overview }}</p>
        </div>
      </div>

      <!-- External Links Section -->
      <h3>External Links</h3>
      <div class="external-links">
        {% if movie.external_ids.imdb_id %}
        <a
          href="https://www.imdb.com/title/{{ movie.external_ids.imdb_id }}"
          class="link imdb"
        >
          <i class="fab fa-imdb"></i> IMDb
        </a>
        {% endif %} {% if movie.external_ids.facebook_id %}
        <a
          href="https://www.facebook.com/{{ movie.external_ids.facebook_id }}"
          class="link facebook"
        >
          <i class="fab fa-facebook-square"></i> Facebook
        </a>
        {% endif %} {% if movie.external_ids.instagram_id %}
        <a
          href="https://www.instagram.com/{{ movie.external_ids.instagram_id }}"
          class="link instagram"
        >
          <i class="fab fa-instagram"></i> Instagram
        </a>
        {% endif %} {% if movie.external_ids.twitter_id %}
        <a
          href="https://twitter.com/{{ movie.external_ids.twitter_id }}"
          class="link twitter"
        >
          <i class="fab fa-twitter"></i> Twitter
        </a>
        {% endif %} {% if movie.homepage %}
        <a
          href="{{ movie.homepage }}"
          class="link website"
          target="_blank"
        >
          <i class="fas fa-globe"></i> Website
        </a>
        {% endif %}
      </div>

      <h3>Cast</h3>
      <div class="row">
        {% for cast_member in movie.credits.cast %}
        <div class="col-lg-3 col-md-4 col-sm-6 text-center mb-3">
          <img
            src="https://image.tmdb.org/t/p/w200{{ cast_member.profile_path }}"
            class="img-fluid rounded-circle mb-2"
            alt="{{ cast_member.name }}"
          />
          <p>{{ cast_member.name }} as {{ cast_member.character }}</p>
          <!-- Assuming 'movie' is the context variable containing movie details including movie.id -->
          <a
            href="{{ url_for('actor_details', actor_id=cast_member.id, movie_id=movie.id) }}"
            class="btn btn-info"
            >View Actor</a
          >
        </div>
        {% endfor %}
      </div>

      <h3>Crew</h3>
      <div class="row">
        {% for crew_member in movie.credits.crew %}
        <div class="col-lg-4 col-md-6 mb-3">
          <div class="crew-member-info">
            <img
              src="https://image.tmdb.org/t/p/w200{{ crew_member.profile_path }}"
              class="img-fluid rounded-circle"
              alt="{{ crew_member.name }}"
            />
            <div class="crew-details">
              <p>
                <strong>{{ crew_member.job }}:</strong> {{
                crew_member.name }}
              </p>
              <p>{{ crew_member.department }}</p>
              {#
              <a
                href="{{ url_for('crew_details', crew_id=crew_member.id) }}"
                class="btn btn-info"
                >View Crew</a
              >
              #}
            </div>
          </div>
        </div>
        {% endfor %}
      </div>

      <h3>Trailers</h3>
      <div class="row">
        {% for video in movie.videos.results %}
        <div class="col-lg-6 col-md-12 mb-3">
          <iframe
            class="embed-responsive-item w-100"
            src="https://www.youtube.com/embed/{{ video.key }}"
            allowfullscreen
          ></iframe>
        </div>
        {% endfor %}
      </div>

      <h3>Reviews</h3>
      <div class="row">
        {% for review in movie.reviews.results %}
        <div class="col-md-12 mb-3">
          <h5>{{ review.author }}</h5>
          <p>{{ review.content }}</p>
        </div>
        {% endfor %}
      </div>

      <a href="{{ url_for('home') }}" class="btn btn-primary"
        >Back to Home</a
      >
    </div>

    <div class="footer">
      <div class="container-fluid">
        <p>&copy; 2024 MovieExplorer. All rights reserved.</p>
      </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/js/bootstrap.bundle.min.js"></script>
    <script
      src="https://kit.fontawesome.com/3dfa0f3609.js"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
